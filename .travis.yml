language: node_js
node_js: 'lts/*'
addons:
  firefox: latest
before_script:
- npm run build
after_success:
- "./node_modules/.bin/nyc report --reporter=text-lcov | ./node_modules/.bin/coveralls"
- rm dist/browsertests.js # has test credentials
- mkdir dist/${TRAVIS_TAG}
- cp dist/bigiot.js dist/${TRAVIS_TAG}/bigiot.js
deploy:
-
  provider: npm
  email: jononor@gmail.com
  skip-cleanup: true
  api_key:
    secure: "Pm3cO7dwn2pwRvP8DUBgw7j9s2MTwnDEqsuUTB6dR4MW2GEsu8e1Uw5OKvf8AJ2HfGXW3i9OrBWEoLXUPriDOViNhS2b68BbssGOgsSyMajMMAbrx0vtYVZIwcEnSwaDfNdAelZhwtXUwDxIFtI46LfFb3FEIawkb9lhaHEDcAKfQ+s9H9LIFKy7v9OM5VKyES2hBF7R+iC5YEqdjCFDHjH36TxeZSUaSEAA6MRi6bw6ZY/rYgrtTTNEerSsys48GjGlBEv9m8DcLR/iZdFVAJcjUtRlIFTPa3g3sUBB2cv7qIRUjychx43WOQAMa2IQBX2nv9dU51S/EHNSICY83QHpCZqFmtguN60qYzwKrjUGW2ETWxRkyca30kin2QUYl8IO/ZwGR5zRPm8NKWFVFWX3214fpYXT52QqbHFB+a9fcGbvE7fCZFuHSHJN6ENnhjZYkeAtnnSZmsuJ+Y60DzCcyi5aJUHT/d1lPsYLbT5ADGa/wyrmd/cxTbfb7OkBq0ONkiSD6cMQzeyNuYdQES7YA9riVGrlXLkVk5rgjh6ve8cW0NriT7j+pAwHSC3TFiAXW/lBWMInQDWUVcDHoa5sG2CE6TlmhGtxHTJphn6q7olSlMTY/sNI/UVML7WwHoUb462e7P2fGS/3Q/3Zoo1p8V3l6QRdVDh2LckwT1U="
  on:
    tags: true
    repo: flowhub/bigiot-js
-
  provider: pages
  skip-cleanup: true
  keep-history: true
  local-dir: dist/
  github-token:
    secure: "NIwBmKs539m576z5AyOIYpMejHvctjC8Hsjo5QVSxuOfM49Zcy3xs9+UqODZdcGg3FhcYHxDV/U1oph0iC7vHEq2RZ4v6jx7Br4/JW0mSZoQRHI0AzrDvIPkNlfv+ZytfKGIvBLoz+quRsoNcPbFcFM/KUmwVCFQiyMKGEu2yxu+gFSZKRFTN7xTTkivn2MDLmerjQJzqlr6tnTPu2B7rab4Ewdc0e4If2W/pLTcMNmY1B0G9EjXwpsOcYQZTNmTBmiZFkL7cHm1WMEEDTmiumNzaHPNeeOcTsnVrR5mkY2wt1boDdCnkbuPbmwyHATUZGxsJKMitonVTUkSH5KU4MTmwRBIZP4YGDeVR6cvENhabg++PO9QfJEKGMlmoF5wjMoWitoNlhlA4ryQDjgKdZpSU3IaYF24Zshe2dwVsAFtrGPicCO5/w4nfFUi0SAUKWQK+GBGhizrJhAR+ut2kNxDVewq12DJD/eiNFM9qrNOJcuLvhXKhY3qboOvD6Hmschcq8Nh27PvpGclGjjBfl8txMnUfysWftB8MlyziMdnpD5xpWYxBqa9EVRnZj0kyB7KUSysPeTWl7QQH5SKrnidGuX/vw8AHPlg0aOZE0YVwb1d656FlcKrB0bH42oQYPwrnCa5Q2KXw6Yyjn6GkkvjAVJBZnIa2994SqazWxo="

  on:
    branch: master 
    tags: true
env:
  global:
  - MOZ_HEADLESS=1
  - secure: dh9lgvbSi09w9H0FbzksahoopQGKzssiGfoxX9H6XUhnsWkHzZIWlU/emr2CcS/irMI89koBVaRg5O8U+goMTRtEqHDbxapordwRHrcm4Zs0+ylI+N561+WK61I0lBZh6Z6rSXn7H/4NjhJYCTUeWlga2JUJ/cPzAxKnV8hdHwiqQeiuKEga2za67XEp7EUFhOBaL8dzRacZdyVdImVoWPC1kqL4/07ym6qwFwvul1ogOKVGBSUARQplMebg0R+vKgO0AKSznDflYG0R8tqVGUjj79JwhsY0ZnFwar6I6l7OeyVEMWcWZuVD/F2VJLBVThsee5wqI7EbFKAQ9IpYlMkBxHpLQTR2bkp1u6wPB2d7sN6rRq82p0KYUfTKhQS2XbSJRg8ZD+uIXwePNP8QUNrNKgqdPO+LP0sfLgTIycPwd9T4lm2oL1tM7YnPzNCTITI0XAqFDsmboYSokX+0/ofvBRQoLtJFGz12uSySTTbJmzlX7FBQYbnfyecU4+yai3GKJWvSbXynveNMUvz2sMTmQGZronaFNPW7enQ0DBwgrc9gXkv9JjR6FKKV+IIeLeyLXOZ2qijk4GXi4IvlLl1bKU9uCX6beUNAhS0CUD4rnvWlCb+jyPhRvJCCGQwGthQpUpoeE7wBFzVl/KKjs7ATjAS1sRLTE2T1jrwgeW8=
  - secure: Yj84OGGl4CFOBmwX2IlBpyV0d4Z0oCLxeeGU4XwjEInFEnR3BVnTehRDs97lsj3ZC8RoyL25G2VKuYrayATviX0K8BW6Tpvcpxx9xLBPRQZjuTiWAK6OFAYFTa7iqksQF5IpXccr5ByvVGZ4+Qgz9bdTjXXAiPj5k2XkEhMoaWsHyGd7zKAdteHE3N6dYVVxAfPH+YF2u7EvX7+k0X6NBsqw7cP9rYcrk241Jf9nHGjJ4ezMQzPobhHF/UnbzG/t9/O2vLPMjf3AKIEnXaMsMsliCGhE+0fOCkpvOrJ3zuPgDJcIUOYtdKM9Utasxsq+WqCGwlA4vRNrxU1XTf3TOoxFFQ9YMVvtZnPATlpNNUD74B7fBRBAf0phNf2gBqs85ThP9HfL6YzxQVA6zNsuMNUv6IviSRHuK+2/jeoL/e1zjZtl27mCK+9ONnw+1HFpTyksh3CNFNgY5vPZeh2FGdl96+PQA50IvTVdqJAEH2VvP919pllmKoklQL5w0EQ/9RB3jJrFwyIwCu81cPBSwIHqQT8QYf61jh+teK8+TzMkiNUluUY4WWfw7WPK+Uxr5gzbQkXLmzZwALGK/C9BbzpzeyfWAbKS7p8uz48w/PTrkQpNhry0El/zU73LyU3a1cl3P/Aieonc64gq95ofnsCxAdOLzFLKOI6T0oWIvV0=
  - secure: OOTgVWr+7z8KPOhVtgr9qRXiGBrv+KtULWsnqNpIITBVll2vmBKVOVAf60nCQpEf+zqlz7PR95BedvfFJRnCTs6TndCYE7e22iLhLanoWu/jB13FyZgq+guosZXn5ddpNTJ3XboCb9XZSDQg6ASGDWTJIGHl/KOG+FOA8VCQTYsynigIkqtR4cgUwovfllw70HKv1o3e4rGE9rqrkOUIB/Outy6PAIRk6BBK2GUT6LsScipTHuvqEprMSWPQ1HevckevN77DeHQoColnW8MQn+O1P67tetw9+LRbM/RLvbBo6KUwn0mZCGorKJ9VZTsQU4uVSG5OrjIsEh0iGXbxcT1eCXcVs4Xqx0dt9bL+tcM+ZNssguAlfjSBlEz5kCp8KiJz3btAjlcFw3h/0fMOB3jnqWhJ0E6dmBe/4zCkqNe3IFLuwpl14JY16820rihJ8d4t4kFwAlczQNBllT+m4Z2EF2TythAVYfN2sL2OfPpW03rO/JZ2dX7p52yGp9KTNgJYcX8GLknWX4w2gvA3qYlbG07mr1Qyi6OI1aXxftSROE9XWPuJELmxigm6+cVagXxn4tbOQsvS59aHo5UjLg+Q6JOrGL/JoKYQXqKvBgpmddtBwWpbds1c1jqr5HeeXUGijq+QLTgoP2pIfbcMQKqIRFX1dabyPKoVmcovZ+s=
  - secure: jE0QnsyF28qO7UN1+hlP94E1iCjAtCh9UQ707nBv6zDF45DcgdMS7jCcRcMuSn36eSwcifq5OB5W9WIGUO4Nx5wynXHZC7dLOfB6oZNgZ9AxoQGHVoije1goM+56F+8pTr2iilSEasKZJlUFD5vxZSbQISKoh/VLn9B0y4lrUgqAkD27ekj/+WmnYyzZJ7IGcqohTnS67sSR5qiC28U59DZGNgO6SWLPfNCBOB8HaPEFLGIg9PxfY4uZqdtqKhSbuE8rsFbwEH7PPPPlnCxOBVDVedWB8GSa8r8mOo7fxKsjjp9JVs2vq+TDlKzT05ceMN1cQcfYuas9QICmKIfagXepvrV/w2gGMw1KArgXMSfAipocTM1U6iOg5eWzwQquBVyWJ3/AJK+JGdiaozRgW9igkrzerjeogzfEY3hLOCdvpWEYFPqjNnD2N849xMv37E+iM1t85a177IwMXmt2FoXUtMxnFDNtPupPh74SqVtXCU7juLYaU8Sn4I5ituy2/RqVgt5XRwr6Tid5/DwVUg81Zuni8H+fORGB7+nFHVI2ZyuRIOt6RJyYmRBdL001j6G9ps5EJW1fvYawKj5nAIsBkAdiCYwAOQbXJj4tIk9VQu0lXGeu6K2bFjTfUUO24lQusT9AIi3SBj4pW+honN+AT2sIoqa81YwWhZj4iW4=
